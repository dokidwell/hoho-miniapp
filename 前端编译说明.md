# 🚀 HOHO小程序前端编译说明

## 📦 前端项目包

**文件名**：`hoho-frontend.tar.gz`  
**大小**：68KB  
**内容**：完整的uni-app前端项目

---

## 📋 编译方法

### 方法一：使用HBuilderX编译（推荐）⭐

**步骤**：

1. **下载并安装HBuilderX**
   - 官网：https://www.dcloud.io/hbuilderx.html
   - 下载"标准版"即可

2. **解压前端项目**
   ```bash
   tar -xzf hoho-frontend.tar.gz
   ```

3. **导入项目到HBuilderX**
   - 打开HBuilderX
   - 文件 → 导入 → 从本地目录导入
   - 选择解压后的 `frontend` 目录

4. **配置微信小程序AppID**
   - 打开 `manifest.json`
   - 找到"微信小程序配置"
   - 填入AppID：`wx4b69e053a557da87`

5. **运行到微信开发者工具（测试）**
   - 点击工具栏"运行" → "运行到小程序模拟器" → "微信开发者工具"
   - 首次运行会提示配置微信开发者工具路径
   - 在微信开发者工具中测试功能

6. **发行到微信小程序（生产）**
   - 点击工具栏"发行" → "小程序-微信"
   - 选择发行模式：生产环境
   - 点击"发行"
   - 编译完成后会自动打开微信开发者工具

7. **上传到微信平台**
   - 在微信开发者工具中点击"上传"
   - 填写版本号（如：1.0.0）
   - 填写项目备注
   - 点击"上传"

---

### 方法二：使用命令行编译（需要uni-app CLI）

**安装uni-app CLI**：
```bash
npm install -g @dcloudio/uvm
uvm
```

**编译项目**：
```bash
cd frontend
npm install
npm run build:mp-weixin
```

编译后的代码在：`dist/build/mp-weixin/`

---

## 📱 微信开发者工具配置

### 1. 下载微信开发者工具

官网：https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html

### 2. 导入项目

- 打开微信开发者工具
- 选择"小程序"
- 点击"+"新建项目
- 项目目录：选择编译后的 `dist/build/mp-weixin` 目录（如果用CLI编译）
  或者HBuilderX会自动打开
- AppID：`wx4b69e053a557da87`
- 项目名称：HOHO数字藏品

### 3. 测试功能

在微信开发者工具中测试：
- [ ] 登录注册
- [ ] 首页展示
- [ ] 藏品详情
- [ ] 创建藏品
- [ ] 交易功能
- [ ] 个人中心

### 4. 上传代码

- 点击工具栏"上传"
- 版本号：1.0.0
- 项目备注：首次上线版本
- 点击"上传"

---

## 🔧 配置检查清单

### 1. API配置 ✅

已配置为生产环境：
```javascript
// frontend/api/config.js
const API_BASE_URL = process.env.NODE_ENV === 'production' 
  ? 'https://api.hohopark.com'  // ✅ 已配置
  : 'http://localhost:8080'
```

### 2. 微信小程序AppID ⚠️

需要在 `manifest.json` 中配置：
```json
{
  "mp-weixin": {
    "appid": "wx4b69e053a557da87"
  }
}
```

### 3. 服务器域名配置 ⚠️

**必须在微信公众平台配置**：

登录 https://mp.weixin.qq.com

进入"开发" → "开发管理" → "开发设置" → "服务器域名"

配置以下域名：

**request合法域名**：
- `https://api.hohopark.com`

**uploadFile合法域名**：
- `https://api.hohopark.com`
- `https://hohopark-1374844071.cos.ap-nanjing.myqcloud.com`

**downloadFile合法域名**：
- `https://api.hohopark.com`
- `https://hohopark-1374844071.cos.ap-nanjing.myqcloud.com`

**如果使用鲸探功能，还需添加**：
- `https://openapi.alipay.com`

---

## 📂 项目结构

```
frontend/
├── pages/              # 页面目录
│   ├── index/         # 首页
│   ├── login/         # 登录
│   ├── register/      # 注册
│   ├── create/        # 创建藏品
│   ├── exchange/      # 交易中心
│   ├── ecology/       # 生态
│   ├── profile/       # 个人中心
│   ├── asset-detail/  # 藏品详情
│   ├── listing/       # 上架
│   ├── redemption/    # 兑换
│   ├── third-party/   # 第三方绑定
│   ├── jingtan-assets/# 鲸探资产
│   └── ledger/        # 透明账本
├── components/         # 组件
│   └── TabBar/        # 底部导航栏
├── api/               # API接口
│   ├── config.js      # API配置
│   └── request.js     # 请求封装
├── utils/             # 工具函数
│   ├── auth.js        # 认证工具
│   ├── format.js      # 格式化工具
│   └── upload.js      # 上传工具
├── static/            # 静态资源
│   └── icons/         # TabBar图标
├── App.vue            # 应用入口
├── main.js            # 主入口
├── manifest.json      # 应用配置
├── pages.json         # 页面配置
└── package.json       # 依赖配置
```

---

## 🎨 设计资源

设计稿位置：`/home/ubuntu/hoho-miniapp/design/`

共45张设计稿PNG文件，供参考。

---

## ⚠️ 注意事项

### 1. 环境切换

- **开发环境**：API地址为 `http://localhost:8080`
- **生产环境**：API地址为 `https://api.hohopark.com`

HBuilderX会根据运行/发行自动切换环境。

### 2. 真机调试

在微信开发者工具中：
- 点击"预览"
- 用微信扫码
- 在真机上测试

### 3. 体验版

上传代码后，在微信公众平台：
- 进入"版本管理"
- 选择刚上传的版本
- 设置为"体验版"
- 生成体验版二维码
- 邀请测试人员扫码体验

### 4. 提交审核

测试无误后：
- 在微信公众平台点击"提交审核"
- 填写功能页面和测试账号
- 等待审核（1-7天）

---

## 🐛 常见问题

### Q1: HBuilderX无法连接微信开发者工具

**解决**：
1. 打开微信开发者工具
2. 设置 → 安全设置
3. 开启"服务端口"
4. 在HBuilderX中重新运行

### Q2: 编译报错

**解决**：
1. 检查 `manifest.json` 配置是否正确
2. 检查 `pages.json` 页面路径是否正确
3. 清除缓存重新编译

### Q3: API请求失败

**解决**：
1. 检查服务器域名是否已在微信公众平台配置
2. 检查API地址是否正确（`https://api.hohopark.com`）
3. 检查后端服务是否正常运行
4. 在微信开发者工具中查看"详情" → "本地设置" → 勾选"不校验合法域名"（仅开发环境）

### Q4: 图片无法显示

**解决**：
1. 检查图片路径是否正确
2. 检查COS域名是否已配置
3. 检查图片URL是否使用HTTPS

---

## 📞 技术支持

如果遇到问题：
1. 查看HBuilderX控制台错误信息
2. 查看微信开发者工具控制台错误信息
3. 查看后端API日志
4. 检查网络请求是否成功

---

## 🎉 编译成功标志

当你看到以下情况，说明编译成功：

1. HBuilderX控制台显示"编译成功"
2. 微信开发者工具自动打开并显示小程序界面
3. 可以在模拟器中正常操作
4. 网络请求正常（可在控制台查看）

---

**祝你编译顺利！** 🚀

如有问题随时联系！
